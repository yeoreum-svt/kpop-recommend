<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>æ°—åˆ†ã¨ã‚¸ãƒ£ãƒ³ãƒ«ã§é¸ã¶K-POP</title>
  <style>
    body {
      font-family: "Noto Sans JP", sans-serif;
      background: #fdfcfa;
      color: #444;
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }
    h2 {
      color: #c2798b;
      font-size: 1.5em;
      margin-bottom: 1em;
    }
    .section-title {
      font-weight: bold;
      color: #a0526d;
      margin-top: 1.2em;
      margin-bottom: 0.5em;
    }
    #feelings, #genres, #moods, #seasons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }
    button {
      padding: 10px 18px;
      border-radius: 24px;
      background: #fff;
      border: 1.5px solid #e3cfcf;
      cursor: pointer;
      font-size: 0.95em;
      transition: all 0.3s ease;
      box-shadow: 1px 1px 3px rgba(0,0,0,0.05);
      position: relative;
    }
    button.selected {
      background-color: #ffe3ec;
      color: #c2798b;
      border-color: #c2798b;
    }
    .recommend-btn, .reset-btn {
      display: inline-block;
      padding: 12px 26px;
      font-size: 1.05em;
      font-weight: 600;
      background: linear-gradient(135deg, #ffd1dc, #ffe4e1);
      color: #a0526d;
      border: none;
      border-radius: 30px;
      box-shadow: 0 4px 10px rgba(255, 182, 193, 0.3);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .recommend-btn:hover, .reset-btn:hover {
      transform: scale(1.03);
    }
    #result {
      margin-top: 30px;
      background: #fffdfd;
      border: 1px solid #f0e5e5;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 2px 2px 10px rgba(0,0,0,0.03);
    }
    iframe {
      margin-top: 10px;
      border-radius: 8px;
    }

    /* éœ‡ãˆã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-4px); }
      50% { transform: translateX(4px); }
      75% { transform: translateX(-4px); }
      100% { transform: translateX(0); }
    }

    .shake {
      animation: shake 0.1s ease;
    }

    /* æ¨ªä¸¦ã³é…ç½® */
    .button-container {
      display: flex;
      gap: 10px;
      justify-content: center;
    }

  </style>
</head>
<body>
  <h2>ğŸ§ ä»Šã®æ°—åˆ†ã¨ã‚¸ãƒ£ãƒ³ãƒ«ã§é¸ã¶ã€ã‚ãªãŸã«ã´ã£ãŸã‚Šã®K-POP</h2>
  
  <div class="section-title">ã‚¸ãƒ£ãƒ³ãƒ«ã‚’é¸ã‚“ã§ãã ã•ã„ï¼ˆæœ€å¤§1ã¤ï¼‰</div>
  <div id="genres">
    <button onclick="selectGenre(this, 'æ‹æ„›')">æ‹æ„›</button>
    <button onclick="selectGenre(this, 'äººç”Ÿ')">äººç”Ÿ</button>
    <button onclick="selectGenre(this, 'å‹æƒ…')">å‹æƒ…</button>
    <button onclick="selectGenre(this, 'æŒ‘æˆ¦')">æŒ‘æˆ¦</button>
  </div>

  <div class="section-title">æ°—åˆ†ã‚’é¸ã‚“ã§ãã ã•ã„ï¼ˆæœ€å¤§2ã¤ï¼‰</div>
  
  <!-- ãƒã‚¸ãƒ†ã‚£ãƒ–ãªæ„Ÿæƒ… -->
  <div class="section-title">ãƒã‚¸ãƒ†ã‚£ãƒ–ãªæ„Ÿæƒ…</div>
  <div id="positiveFeelings">
    <button onclick="selectFeeling(this, 'æ˜ã‚‹ã„')">æ˜ã‚‹ã„</button>
    <button onclick="selectFeeling(this, 'é’æ˜¥')">é’æ˜¥</button>
    <button onclick="selectFeeling(this, 'å¸Œæœ›')">å¸Œæœ›</button>
    <button onclick="selectFeeling(this, 'æœŸå¾…')">æœŸå¾…</button>
    <button onclick="selectFeeling(this, 'ãƒ¢ãƒ†ãƒ¢ãƒ†')">ãƒ¢ãƒ†ãƒ¢ãƒ†</button>
    <button onclick="selectFeeling(this, 'è‡ªä¿¡')">è‡ªä¿¡</button>
  </div>

  <!-- ãƒã‚¬ãƒ†ã‚£ãƒ–ãªæ„Ÿæƒ… -->
  <div class="section-title">ãƒã‚¬ãƒ†ã‚£ãƒ–ãªæ„Ÿæƒ…</div>
  <div id="negativeFeelings">
    <button onclick="selectFeeling(this, 'æ‚²ã—ã„')">æ‚²ã—ã„</button>
    <button onclick="selectFeeling(this, 'å¤±æ‹')">å¤±æ‹</button>
    <button onclick="selectFeeling(this, 'ä¸å®‰')">ä¸å®‰</button>
    <button onclick="selectFeeling(this, 'å­¤ç‹¬')">å­¤ç‹¬</button>
    <button onclick="selectFeeling(this, 'è‘›è—¤')">è‘›è—¤</button>
    <button onclick="selectFeeling(this, 'çµ¶æœ›')">çµ¶æœ›</button>
    <button onclick="selectFeeling(this, 'æ¬²æœ›')">æ¬²æœ›</button>
    <button onclick="selectFeeling(this, 'åæŠ—')">åæŠ—</button>
    <button onclick="selectFeeling(this, 'ãƒˆãƒ©ã‚¦ãƒ')">ãƒˆãƒ©ã‚¦ãƒ</button>
  </div>

  <!-- æ‹æ„›é–¢é€£ -->
  <div class="section-title">æ‹æ„›é–¢é€£ã®æ„Ÿæƒ…</div>
  <div id="romanticFeelings">
    <button onclick="selectFeeling(this, 'ç‰‡æ€ã„')">ç‰‡æ€ã„</button>
    <button onclick="selectFeeling(this, 'å¾©ç¸')">å¾©ç¸</button>
    <button onclick="selectFeeling(this, 'ç§˜å¯†')">ç§˜å¯†</button>
  </div>

  <div class="section-title">æ›²ã‚¸ãƒ£ãƒ³ãƒ«ã‚’é¸ã‚“ã§ãã ã•ã„ï¼ˆæœ€å¤§1ã¤ï¼‰</div>
  <div id="moods">
    <button onclick="selectMood(this, 'ãƒãƒ©ãƒ¼ãƒ‰')">ãƒãƒ©ãƒ¼ãƒ‰</button>
    <button onclick="selectMood(this, 'ãƒ­ãƒƒã‚¯')">ãƒ­ãƒƒã‚¯</button>
    <button onclick="selectMood(this, 'HIPHOP')">HIPHOP</button>
    <button onclick="selectMood(this, 'Rï¼†B')">Rï¼†B</button>
    <button onclick="selectMood(this, 'ã‚¨ãƒ¬ã‚¯ãƒˆãƒ­')">ã‚¨ãƒ¬ã‚¯ãƒˆãƒ­</button>
    <button onclick="selectMood(this, 'ãƒãƒ³ãƒ‰')">ãƒãƒ³ãƒ‰</button>
  </div>

  <div class="section-title">å­£ç¯€ãƒ»æ™‚é–“å¸¯ã‚’é¸ã‚“ã§ãã ã•ã„ï¼ˆæœ€å¤§1ã¤ï¼‰</div>
  <div id="seasons">
    <div>
      <div class="section-title">å­£ç¯€</div>
      <button onclick="selectSeason(this, 'æ˜¥')">æ˜¥</button>
      <button onclick="selectSeason(this, 'å¤')">å¤</button>
      <button onclick="selectSeason(this, 'ç§‹')">ç§‹</button>
      <button onclick="selectSeason(this, 'å†¬')">å†¬</button>
    </div>
    <div>
      <div class="section-title">å ´æ‰€</div>
      <button onclick="selectSeason(this, 'èŠ±')">èŠ±</button>
      <button onclick="selectSeason(this, 'æµ·')">æµ·</button>
    </div>
    <div>
      <div class="section-title">æ™‚é–“å¸¯</div>
      <button onclick="selectSeason(this, 'æœ')">æœ</button>
      <button onclick="selectSeason(this, 'æ˜¼')">æ˜¼</button>
      <button onclick="selectSeason(this, 'å¤œ')">å¤œ</button>
    </div>
  </div>

  <div class="button-container">
    <button class="recommend-btn" id="searchBtn" onclick="recommendSong()">ğŸŒ· Search</button>
    <button class="reset-btn" id="resetBtn" onclick="resetSelections()">ğŸ”„ Reset</button>
  </div>

  <div id="result" style="display:none;">
    <h3 id="title"></h3>
    <p><em id="lyrics"></em></p>
    <div id="video"></div>
  </div>

  <script>
    let selectedGenres = [];
    let selectedFeelings = [];
    let selectedMoods = null;
    let selectedSeasons = [];

    const maxSelections = {
      genre: 1,
      feeling: 2,
      mood: 1,
      season: 1
    };

    // æ°—åˆ†é¸æŠå‡¦ç†
    function selectFeeling(btn, feeling) {
      if (selectedFeelings.length >= maxSelections.feeling && !selectedFeelings.includes(feeling)) {
        btn.classList.add("shake");
        setTimeout(() => btn.classList.remove("shake"), 100);
        alert("æ°—åˆ†ã¯æœ€å¤§2ã¤ã¾ã§é¸ã¹ã¾ã™ã€‚");
        return;
      }
      toggleSelection(btn, feeling, selectedFeelings);
    }

    // ã‚¸ãƒ£ãƒ³ãƒ«é¸æŠå‡¦ç†
    function selectGenre(btn, genre) {
      if (selectedGenres.length >= maxSelections.genre && !selectedGenres.includes(genre)) {
        btn.classList.add("shake");
        setTimeout(() => btn.classList.remove("shake"), 100);
        alert("ã‚¸ãƒ£ãƒ³ãƒ«ã¯æœ€å¤§1ã¤ã¾ã§é¸ã¹ã¾ã™ã€‚");
        return;
      }
      toggleSelection(btn, genre, selectedGenres);
    }

    // æ›²ã‚¸ãƒ£ãƒ³ãƒ«é¸æŠå‡¦ç†
    function selectMood(btn, mood) {
      if (selectedMoods && selectedMoods !== mood) {
        btn.classList.add("shake");
        setTimeout(() => btn.classList.remove("shake"), 100);
        alert("æ›²ã‚¸ãƒ£ãƒ³ãƒ«ã¯æœ€å¤§1ã¤ã¾ã§é¸ã¹ã¾ã™ã€‚");
        return;
      }
      toggleSelection(btn, mood, selectedMoods, true);
    }

    // å­£ç¯€ãƒ»æ™‚é–“å¸¯é¸æŠå‡¦ç†
    function selectSeason(btn, season) {
      if (selectedSeasons.length >= maxSelections.season && !selectedSeasons.includes(season)) {
        btn.classList.add("shake");
        setTimeout(() => btn.classList.remove("shake"), 100);
        alert("å­£ç¯€ãƒ»æ™‚é–“å¸¯ã¯æœ€å¤§1ã¤ã¾ã§é¸ã¹ã¾ã™ã€‚");
        return;
      }
      toggleSelection(btn, season, selectedSeasons);
    }

    // é¸æŠå‡¦ç†ã®å…±é€šé–¢æ•°
    function toggleSelection(btn, selection, selectedArray, isSingle = false) {
      const index = selectedArray.indexOf(selection);
      if (index !== -1) {
        selectedArray.splice(index, 1);
        btn.classList.remove("selected");
      } else {
        if (isSingle) {
          selectedArray = [selection];
          document.querySelectorAll(`#${btn.parentNode.id} button`).forEach(b => b.classList.remove("selected"));
        } else {
          selectedArray.push(selection);
        }
        btn.classList.add("selected");
      }
    }

    // çµæœã®è¡¨ç¤º
    function recommendSong() {
      // æ‹æ„›ï¼‹è‘›è—¤ã€ã‚¨ãƒ¬ã‚¯ãƒˆãƒ­ã€ã‚ªãƒ«ã‚¿ãƒŠãƒ†ã‚£ãƒ–ã€å¤œ ã«è©²å½“ã™ã‚‹å ´åˆ
      if ((selectedGenres.includes("æ‹æ„›") && selectedFeelings.includes("è‘›è—¤")) || 
          selectedMoods === "ã‚¨ãƒ¬ã‚¯ãƒˆãƒ­" || 
          selectedMoods === "ã‚ªãƒ«ã‚¿ãƒŠãƒ†ã‚£ãƒ–" || 
          selectedSeasons.includes("å¤œ")) {
        showResult();
      }
    }

    // çµæœã‚’è¡¨ç¤º
    function showResult() {
      document.getElementById("title").innerText = "ãŠã™ã™ã‚ã®æ›²: ë… : Fear - SEVENTEEN";
      document.getElementById("lyrics").innerText = "ë„Œ ë‚´ ê¸°ì–µì„ ì§€ì›Œì•¼ ë¼\nI'm poison\nI know I can't take it no more\n\nå›ã¯åƒ•ã®è¨˜æ†¶ã‚’æ¶ˆã•ãªãã‚ƒãƒ€ãƒ¡ã \nåƒ•ã¯æ¯’ã ã‹ã‚‰\nã‚‚ã†è€ãˆã‚‰ã‚Œãªã„ã‚“ã ";
      document.getElementById("video").innerHTML = `<iframe width="100%" height="315" src="https://www.youtube.com/embed/ap14O5-G7UA?si=vBHNCeMnk3mndAGO" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
      document.getElementById("result").style.display = "block";
    }

    // é¸æŠãƒªã‚»ãƒƒãƒˆ
    function resetSelections() {
      selectedGenres = [];
      selectedFeelings = [];
      selectedMoods = null;
      selectedSeasons = [];
      document.querySelectorAll('button.selected').forEach(btn => btn.classList.remove("selected"));
      document.getElementById("result").style.display = "none";
    }
  </script>
</body>
</html>
